<% provide :head_tags do %>
  <meta name='turbolinks-visit-control' content='reload'>
  <script>
    document.addEventListener("DOMContentLoaded", function(){
      var map = initHazardIndexMap(<%= @hazards_coords %>)
    });
  </script>
<% end %>

<p id="notice"><%= notice %></p>



<div class="container">
  <figure class="text-center">

    <p>Welcome to Street Smart! This is an app that allows you to report hazards that you see in your neighborhood as well as view and vote on hazards that others have reported. In order to report a hazard, please log in! </p>
  </figure>

</div>

<div class="container">
  <div class="row row-cols-4">
    <div class="col">
    <h1>Recent and Closest Hazards</h1>
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Name</th>
          <th>Latitude</th>
          <th>Longitude</th>
        </tr>
      </thead>

      <tbody>
        <% @hazards.each do |hazard| %>
        <tr>
          <td><%= hazard.title %></td>
          <td><%= hazard.latitude %></td>
          <td><%= hazard.longitude %></td>
        </tr>

        <% end %>
      </tbody>
    </table>
    </div>
    <div class="col"></div>
    <div class="col">
      <%= button_to 'Report a Hazard', new_hazard_path, method: :get %>
      <%= button_to 'Login With Google', '/auth/google_oauth2', method: :get, local: true %> <br>
      <div id="mapHazard"></div>
    </div>
    <div class="col">
    </div>
  </div>
</div>
